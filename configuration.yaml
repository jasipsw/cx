# Home Assistant Configuration
# Reorganized for better maintainability

# Loads default set of integrations. Do not remove.
default_config:

# Load frontend themes from the themes folder
frontend:
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /local/community/lovelace-card-mod/card-mod.js

# Core includes
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
modbus: !include modbus.yaml

# TLS with letsencrypt add-on
http:
  server_port: 443
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem

# Logging configuration
logger:
  default: info
  logs:
    custom_components.hbx_sensorlinx: info
    homeassistant.components.modbus: info
    pymodbus: info

# This section is for LEGACY sensor platforms (like 'filter', 'mqtt', etc.)
# Combine all your legacy sensors (filter and power grid) into one file and include it here.
sensor: !include sensors/legacy_sensors.yaml

template: !include_dir_merge_list sensors/template/
utility_meter: !include sensors/utility_meters/utility_meters.yaml

# Binary sensors (includes trend sensors for G2 valve detection)
binary_sensor: !include sensors/binary_sensors.yaml



# Helper entities
input_number: !include helpers/input_number.yaml
input_select: !include helpers/input_select.yaml
input_boolean: !include helpers/input_boolean.yaml


lovelace:
  dashboards:
    cx-diagnostic:
      mode: yaml
      title: CX Diagnostic
      icon: mdi:bug
      show_in_sidebar: true
      filename: dashboards/dashboard_diagnostic.yaml

    cx-modbus:
      mode: yaml
      title: CX Modbus
      icon: mdi:bug
      show_in_sidebar: true
      filename: dashboards/dashboard_modbus.yaml

    cx-energy:
      mode: yaml
      title: Energy Analysis
      icon: mdi:chart-bar
      show_in_sidebar: true
      filename: dashboards/dashboard_energy.yaml

    cx-sensor-verification:
      mode: yaml
      title: Sensor Verification
      icon: mdi:check-decagram
      show_in_sidebar: true
      filename: dashboards/dashboard_sensor_verification.yaml


