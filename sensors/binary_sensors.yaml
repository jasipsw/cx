# Binary Sensors Configuration
# Includes trend sensors for G2 valve detection

# ============================================================================
# TREND SENSORS - Detect Temperature Rise for G2 Valve Detection
# ============================================================================
# These detect when a tank temperature is actively RISING (being heated)
# More reliable than static delta-T measurements

# DHW Tank Heating Trend
# Detects when DHW tank temperature is rising
- platform: trend
  sensors:
    dhw_tank_heating_trend:
      friendly_name: "DHW Tank Heating Trend"
      entity_id: sensor.dhw_tank_temperature
      device_class: heat
      sample_duration: 180  # Look at last 3 minutes of data (shorter window)
      min_gradient: 0.0033  # Minimum rise rate: 0.2°F/min (0.2/60 seconds)
      max_samples: 6  # Use 6 samples over the 3-minute window

# Buffer Tank Heating Trend
# Detects when buffer tank temperature is rising
- platform: trend
  sensors:
    buffer_tank_heating_trend:
      friendly_name: "Buffer Tank Heating Trend"
      entity_id: sensor.shelly_plus_buffer_tank_temperature
      device_class: heat
      sample_duration: 180  # Look at last 3 minutes of data (shorter window)
      min_gradient: 0.0033  # Minimum rise rate: 0.2°F/min (0.2/60 seconds)
      max_samples: 6  # Use 6 samples over the 3-minute window

