# Chiltrix Heat Pump - Input Number Helpers
# Configuration values for CX calculations and cost tracking

# Input Number Helpers for CX50 Heat Pump Configuration

# ------------------------------------------------------------------------
# Fluid Properties for Heat Transfer Calculations
# ------------------------------------------------------------------------

# Fluid density in kg/m³
# Default: 1025 kg/m³ for propylene glycol mix (heat pump side)
# Note: HVAC buffer side uses 970 kg/m³ (see hvac-sensors.yaml)

cx_fluid_specific_heat:
  name: "CX Fluid Specific Heat"
  min: 3.5
  max: 4.5
  step: 0.01
  initial: 3.95
  unit_of_measurement: "kJ/(kg·°C)"
  mode: box
  icon: mdi:water-thermometer

cx_fluid_density:
  name: "CX Fluid Density"
  min: 900
  max: 1100
  step: 1
  initial: 970
  unit_of_measurement: "kg/m³"
  mode: box
  icon: mdi:weight

# Electric rates
cx_electric_rate_flat:
  name: "Electric Rate (Flat)"
  min: 0.01
  max: 1.00
  step: 0.001
  initial: 0.15
  unit_of_measurement: "$/kWh"
  mode: box
  icon: mdi:currency-usd

cx_electric_rate_peak:
  name: "Electric Rate (Peak)"
  min: 0.01
  max: 1.00
  step: 0.001
  initial: 0.25
  unit_of_measurement: "$/kWh"
  mode: box
  icon: mdi:currency-usd

cx_electric_rate_mid_peak:
  name: "Electric Rate (Mid-Peak)"
  min: 0.01
  max: 1.00
  step: 0.001
  initial: 0.18
  unit_of_measurement: "$/kWh"
  mode: box
  icon: mdi:currency-usd

cx_electric_rate_off_peak:
  name: "Electric Rate (Off-Peak)"
  min: 0.01
  max: 1.00
  step: 0.001
  initial: 0.10
  unit_of_measurement: "$/kWh"
  mode: box
  icon: mdi:currency-usd

# Peak hour times
cx_peak_start_hour:
  name: "Peak Start Hour"
  min: 0
  max: 23
  step: 1
  initial: 16
  mode: slider
  icon: mdi:clock-start

cx_peak_end_hour:
  name: "Peak End Hour"
  min: 0
  max: 23
  step: 1
  initial: 21
  mode: slider
  icon: mdi:clock-end

# Fuel comparison rates
cx_gas_rate:
  name: "Natural Gas Rate"
  min: 0.01
  max: 5.00
  step: 0.01
  initial: 1.50
  unit_of_measurement: "$/therm"
  mode: box
  icon: mdi:fire

cx_oil_rate:
  name: "Heating Oil Rate"
  min: 0.01
  max: 10.00
  step: 0.01
  initial: 4.00
  unit_of_measurement: "$/gallon"
  mode: box
  icon: mdi:barrel

cx_propane_rate:
  name: "Propane Rate"
  min: 0.01
  max: 10.00
  step: 0.01
  initial: 3.50
  unit_of_measurement: "$/gallon"
  mode: box
  icon: mdi:gas-cylinder

cx_gas_furnace_efficiency:
  name: "Gas Furnace Efficiency"
  min: 70
  max: 98
  step: 1
  initial: 85
  unit_of_measurement: "%"
  mode: slider
  icon: mdi:gauge


# Heat pump optimization threshold
heat_pump_delta_t_threshold:
  name: "Heat Pump Delta-T Threshold"
  min: -2.0
  max: 5.0
  step: 0.1
  initial: 0.0
  unit_of_measurement: "°F"
  mode: box
  icon: mdi:thermometer-lines

# ------------------------------------------------------------------------
# Optimization Parameters (Phase 1-3 Implementation)
# ------------------------------------------------------------------------

# Buffer Tank Temperature Differential Target
# Phase 1: 18°F (from current 10°F)
# Goal: Increase runtime to reduce short cycling
buffer_differential_target:
  name: Buffer Differential Target
  min: 5
  max: 25
  step: 1
  initial: 18
  unit_of_measurement: "°F"
  icon: mdi:thermometer-lines

# Heat Pump Supply Temperature Target
# Phase 1: Start at 90°F (current)
# Phase 2: Reduce to 85°F
# Phase 3: Fine-tune to 82°F (manufacturer optimal)
heat_pump_supply_temp_target:
  name: Heat Pump Supply Temp Target
  min: 75
  max: 95
  step: 1
  initial: 90
  unit_of_measurement: "°F"
  icon: mdi:thermometer

# Target COP Goal
# Manufacturer rating: 4.55 at 47°F ambient
target_cop:
  name: Target COP
  min: 2.0
  max: 6.0
  step: 0.05
  initial: 4.55
  icon: mdi:target

# Minimum Runtime Target (minutes)
# Goal: Achieve longer runtimes to reduce startup penalties
# Target: 15+ minutes per cycle
minimum_runtime_target:
  name: Minimum Runtime Target
  min: 5
  max: 30
  step: 1
  initial: 15
  unit_of_measurement: "min"
  icon: mdi:timer

# Startup Phase Duration (seconds)
# Default: 180 seconds (3 minutes)
# This is the period where startup penalties are highest
startup_phase_duration:
  name: Startup Phase Duration
  min: 60
  max: 600
  step: 30
  initial: 180
  unit_of_measurement: "s"
  icon: mdi:rocket-launch


  #######################
  # Flow rates
test_hp_flow:
  name: Test HP Flow Rate
  min: 0
  max: 50
  step: 0.5
  unit_of_measurement: "L/min"
  icon: mdi:water-pump

test_hvac_flow:
  name: Test HVAC Flow Rate
  min: 0
  max: 50
  step: 0.5
  unit_of_measurement: "L/min"
  icon: mdi:water-pump

# HP Temperatures
test_hp_outlet_temp:
  name: Test HP Outlet Temp
  min: 50
  max: 140
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:thermometer-high

test_hp_inlet_temp:
  name: Test HP Inlet Temp
  min: 40
  max: 130
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:thermometer-low

# Buffer Tank Temperatures
test_buffer_supply_temp:
  name: Test Buffer Supply Temp
  min: 50
  max: 140
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:thermometer

test_buffer_return_temp:
  name: Test Buffer Return Temp
  min: 40
  max: 130
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:thermometer

# DHW Temperatures
test_dhw_inlet_temp:
  name: Test DHW Inlet Temp
  min: 50
  max: 140
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:thermometer-high

test_dhw_outlet_temp:
  name: Test DHW Outlet Temp
  min: 40
  max: 130
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:thermometer-low

test_dhw_tank_temp:
  name: Test DHW Tank Temp
  min: 40
  max: 140
  step: 0.5
  unit_of_measurement: "°F"
  icon: mdi:water-boiler

# Power and Performance
test_hp_power:
  name: Test HP Power Input
  min: 0
  max: 5000
  step: 50
  unit_of_measurement: "W"
  icon: mdi:lightning-bolt

test_hp_thermal:
  name: Test HP Thermal Output
  min: 0
  max: 20000
  step: 100
  unit_of_measurement: "W"
  icon: mdi:fire

test_hvac_thermal:
  name: Test HVAC Thermal Load
  min: 0
  max: 15000
  step: 100
  unit_of_measurement: "W"
  icon: mdi:radiator

test_fan_speed:
  name: Test Fan Speed
  min: 0
  max: 100
  step: 1
  unit_of_measurement: "%"
  icon: mdi:fan


home_heat_loss_design_temperature:
  name: "home_heat_loss_design_temperature"
  min: -20
  max: 70
  step: 1
  initial: 9
  unit_of_measurement: "°F"
  mode: box
  icon: mdi:water-thermometer

home_heat_loss_manual_j:
  name: "Manual J Home Heat Loss"
  min: 0
  max: 100000
  step: 1
  initial: 46552
  unit_of_measurement: "BTU/h"
  icon: mdi:fire
  mode: box

# ------------------------------------------------------------------------
# Adaptive Supply Temperature Optimization
# These helpers control the automatic setpoint adjustment feature
# ------------------------------------------------------------------------

# Minimum supply temperature limit (°F)
# Below this, zones may not maintain setpoints
supply_temp_min_limit:
  name: "Supply Temp Minimum Limit"
  min: 70
  max: 90
  step: 1
  initial: 78
  unit_of_measurement: "°F"
  mode: slider
  icon: mdi:thermometer-chevron-down

# Maximum supply temperature limit (°F)
# Above this, COP degrades significantly
supply_temp_max_limit:
  name: "Supply Temp Maximum Limit"
  min: 90
  max: 120
  step: 1
  initial: 105
  unit_of_measurement: "°F"
  mode: slider
  icon: mdi:thermometer-chevron-up

# Maximum adjustment per hour (°F)
# Limits how fast the setpoint can change
supply_temp_max_change_per_hour:
  name: "Max Setpoint Change Per Hour"
  min: 1
  max: 5
  step: 0.5
  initial: 2
  unit_of_measurement: "°F"
  mode: slider
  icon: mdi:speedometer

# How long demand must be stable before adjusting (minutes)
supply_temp_adjustment_delay:
  name: "Adjustment Delay"
  min: 15
  max: 120
  step: 15
  initial: 30
  unit_of_measurement: "min"
  mode: slider
  icon: mdi:timer-sand